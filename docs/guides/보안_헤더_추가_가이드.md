# ë³´ì•ˆ í—¤ë” ì¶”ê°€ ê°€ì´ë“œ

**ëª©ì **: IT íŒ€ì— ì œê³µí•  ë³´ì•ˆ í—¤ë” ì •ë³´ë¥¼ ê°•í™”í•˜ê¸° ìœ„í•œ ê°€ì´ë“œ

---

## í˜„ì¬ ìƒíƒœ

### âœ… í˜„ì¬ ì„¤ì •ëœ ë³´ì•ˆ ê¸°ëŠ¥
- HTTPS/TLS (Vercel ìë™ ì œê³µ)
- Secure Cookie (`secure` í”Œë˜ê·¸)
- SameSite ì¿ í‚¤ ì •ì±…

### ğŸ“‹ ì¶”ê°€ ê°€ëŠ¥í•œ ë³´ì•ˆ í—¤ë”
- HSTS (Strict-Transport-Security)
- CSP (Content-Security-Policy)
- X-Frame-Options
- Referrer-Policy
- X-Content-Type-Options
- Permissions-Policy

---

## ë³´ì•ˆ í—¤ë” ì¶”ê°€ ë°©ë²•

### next.config.ts ìˆ˜ì •

```typescript
import type { NextConfig } from 'next'

const nextConfig: NextConfig = {
  images: {
    remotePatterns: [
      // ... ê¸°ì¡´ ì„¤ì •
    ],
  },
  async headers() {
    return [
      {
        source: '/:path*',
        headers: [
          // HSTS: HTTPS ê°•ì œ (1ë…„)
          {
            key: 'Strict-Transport-Security',
            value: 'max-age=31536000; includeSubDomains; preload',
          },
          // X-Frame-Options: í´ë¦­ì¬í‚¹ ë°©ì§€
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          // X-Content-Type-Options: MIME íƒ€ì… ìŠ¤ë‹ˆí•‘ ë°©ì§€
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          },
          // Referrer-Policy: ë¦¬í¼ëŸ¬ ì •ë³´ ì œì–´
          {
            key: 'Referrer-Policy',
            value: 'strict-origin-when-cross-origin',
          },
          // Permissions-Policy: ë¸Œë¼ìš°ì € ê¸°ëŠ¥ ì œì–´
          {
            key: 'Permissions-Policy',
            value: 'camera=(), microphone=(), geolocation=()',
          },
          // CSP: XSS ë°©ì§€ (í•„ìš”ì— ë”°ë¼ ì¡°ì •)
          {
            key: 'Content-Security-Policy',
            value: [
              "default-src 'self'",
              "script-src 'self' 'unsafe-eval' 'unsafe-inline'", // Next.js í•„ìš”
              "style-src 'self' 'unsafe-inline'", // Tailwind í•„ìš”
              "img-src 'self' data: https:",
              "font-src 'self' data:",
              "connect-src 'self' https://*.supabase.co wss://*.supabase.co",
              "frame-src 'self' https://www.youtube.com", // YouTube ì„ë² ë“œ
            ].join('; '),
          },
        ],
      },
    ]
  },
  async rewrites() {
    // ... ê¸°ì¡´ rewrites
  },
}

export default nextConfig
```

---

## ë³´ì•ˆ í—¤ë” ì„¤ëª…

### 1. Strict-Transport-Security (HSTS)
- **ëª©ì **: HTTPS ê°•ì œ
- **ê°’**: `max-age=31536000; includeSubDomains; preload`
- **íš¨ê³¼**: ë¸Œë¼ìš°ì €ê°€ 1ë…„ê°„ HTTPSë§Œ ì‚¬ìš©í•˜ë„ë¡ ê°•ì œ

### 2. X-Frame-Options
- **ëª©ì **: í´ë¦­ì¬í‚¹ ë°©ì§€
- **ê°’**: `DENY`
- **íš¨ê³¼**: iframe ì„ë² ë“œ ì°¨ë‹¨

### 3. X-Content-Type-Options
- **ëª©ì **: MIME íƒ€ì… ìŠ¤ë‹ˆí•‘ ë°©ì§€
- **ê°’**: `nosniff`
- **íš¨ê³¼**: ë¸Œë¼ìš°ì €ê°€ Content-Typeì„ ë¬´ì‹œí•˜ì§€ ì•Šë„ë¡ ê°•ì œ

### 4. Referrer-Policy
- **ëª©ì **: ë¦¬í¼ëŸ¬ ì •ë³´ ì œì–´
- **ê°’**: `strict-origin-when-cross-origin`
- **íš¨ê³¼**: ê°™ì€ ë„ë©”ì¸ ë‚´ì—ì„œëŠ” ì „ì²´ URL, ë‹¤ë¥¸ ë„ë©”ì¸ìœ¼ë¡œëŠ” originë§Œ ì „ì†¡

### 5. Permissions-Policy
- **ëª©ì **: ë¸Œë¼ìš°ì € ê¸°ëŠ¥ ì œì–´
- **ê°’**: `camera=(), microphone=(), geolocation=()`
- **íš¨ê³¼**: ì¹´ë©”ë¼/ë§ˆì´í¬/ìœ„ì¹˜ ì •ë³´ ì ‘ê·¼ ì°¨ë‹¨ (í•„ìš” ì‹œ ì¡°ì •)

### 6. Content-Security-Policy (CSP)
- **ëª©ì **: XSS ë°©ì§€
- **ì£¼ì˜**: Next.jsì™€ Tailwind CSS ì‚¬ìš© ì‹œ `unsafe-inline`, `unsafe-eval` í•„ìš”
- **íš¨ê³¼**: í—ˆìš©ëœ ì†ŒìŠ¤ì—ì„œë§Œ ë¦¬ì†ŒìŠ¤ ë¡œë“œ

---

## í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ë¡œì»¬ í…ŒìŠ¤íŠ¸
```bash
npm run dev
# ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ â†’ Network â†’ ì‘ë‹µ í—¤ë” í™•ì¸
```

### 2. ì˜¨ë¼ì¸ ë„êµ¬
- **securityheaders.com**: ë³´ì•ˆ í—¤ë” ì ìˆ˜ í™•ì¸
- **SSL Labs**: SSL/TLS ì„¤ì • í™•ì¸

### 3. curl í…ŒìŠ¤íŠ¸
```bash
curl -I https://eventflow.kr
```

---

## ì£¼ì˜ì‚¬í•­

### CSP ì„¤ì • ì‹œ ì£¼ì˜
- Next.jsëŠ” `unsafe-inline`, `unsafe-eval`ì´ í•„ìš”í•  ìˆ˜ ìˆìŒ
- Tailwind CSSëŠ” `unsafe-inline` ìŠ¤íƒ€ì¼ í•„ìš”
- YouTube ì„ë² ë“œëŠ” `frame-src`ì— ì¶”ê°€ í•„ìš”
- Supabase Realtimeì€ WebSocket (`wss://`) í—ˆìš© í•„ìš”

### HSTS ì£¼ì˜
- `preload` í”Œë˜ê·¸ëŠ” HSTS Preload Listì— ì œì¶œ ì‹œì—ë§Œ ì‚¬ìš©
- ì˜ëª» ì„¤ì •í•˜ë©´ ëª¨ë“  í•˜ìœ„ ë„ë©”ì¸ì— ì˜í–¥

---

## IT íŒ€ì— ì œê³µí•  ì •ë³´

ë³´ì•ˆ í—¤ë”ë¥¼ ì¶”ê°€í•œ í›„, IT íŒ€ì— ë‹¤ìŒ ì •ë³´ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```
â–  ë³´ì•ˆ í—¤ë” ì„¤ì • ì™„ë£Œ
- HSTS (Strict-Transport-Security): HTTPS ê°•ì œ
- X-Frame-Options: í´ë¦­ì¬í‚¹ ë°©ì§€
- X-Content-Type-Options: MIME íƒ€ì… ìŠ¤ë‹ˆí•‘ ë°©ì§€
- Referrer-Policy: ë¦¬í¼ëŸ¬ ì •ë³´ ì œì–´
- Content-Security-Policy: XSS ë°©ì§€
- Permissions-Policy: ë¸Œë¼ìš°ì € ê¸°ëŠ¥ ì œì–´

í™•ì¸ ë°©ë²•: securityheaders.comì—ì„œ ì ìˆ˜ í™•ì¸ ê°€ëŠ¥
```

---

**ì°¸ê³ **: ë³´ì•ˆ í—¤ë” ì¶”ê°€ëŠ” ì„ íƒì‚¬í•­ì´ì§€ë§Œ, IT íŒ€ì˜ ë³´ì•ˆ ê²€í†  ì‹œ ê¸ì •ì ì¸ ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
