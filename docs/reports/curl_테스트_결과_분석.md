# curl í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¶„ì„

**í…ŒìŠ¤íŠ¸ ì¼ì‹œ**: 2026ë…„ 2ì›” 4ì¼  
**í…ŒìŠ¤íŠ¸ ëŒ€ìƒ**: `https://eventflow.kr/api/client/emails/ffcfb8bb-5906-49e7-89ff-ded295851a86/test-send`

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½

### 1. GET ìš”ì²­
```bash
curl.exe -i https://eventflow.kr/api/client/emails/.../test-send
```

**ê²°ê³¼**:
- **ìƒíƒœ ì½”ë“œ**: `500 Internal Server Error` âš ï¸
- **X-Matched-Path**: `/500`
- **X-Next-Error-Status**: `500`
- **X-Vercel-Id**: `icn1::ql6bz-1770185198206-0370ea35557a`
- **X-Vercel-Cache**: `MISS`

**ë¶„ì„**:
- âŒ 405ê°€ ì•„ë‹Œ **500 ì—ëŸ¬** ë°œìƒ
- ë¼ìš°íŠ¸ê°€ `/500` ì—ëŸ¬ í˜ì´ì§€ë¡œ ë§¤ì¹­ë¨
- ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì‹¤í–‰ë˜ì§€ ì•Šê³  ìˆìŒ

---

### 2. OPTIONS ìš”ì²­
```bash
curl.exe -i -X OPTIONS https://eventflow.kr/api/client/emails/.../test-send
```

**ê²°ê³¼**:
- **ìƒíƒœ ì½”ë“œ**: `204 No Content` âœ…
- **X-Matched-Path**: `/500` âš ï¸ (ì´ìƒí•¨)
- **X-Next-Error-Status**: `500` âš ï¸ (ì´ìƒí•¨)
- **X-Vercel-Id**: `icn1::t965p-1770185199065-54452d09eccf`
- **X-Vercel-Cache**: `BYPASS`

**ë¶„ì„**:
- ìƒíƒœ ì½”ë“œëŠ” 204ë¡œ ì •ìƒì´ì§€ë§Œ í—¤ë”ê°€ ì´ìƒí•¨
- X-Matched-Pathê°€ `/500`ìœ¼ë¡œ ë‚˜ì˜´ (ë¼ìš°íŠ¸ ë§¤ì¹­ ë¬¸ì œ)

---

### 3. POST ìš”ì²­
```bash
curl.exe -i -X POST https://eventflow.kr/api/client/emails/.../test-send \
  -H "Content-Type: application/json" \
  --data '{"testEmails":["test@example.com"]}'
```

**ê²°ê³¼**:
- **ìƒíƒœ ì½”ë“œ**: `405 Method Not Allowed` âŒ
- **X-Matched-Path**: `/500` âš ï¸
- **X-Next-Error-Status**: `500` âš ï¸
- **X-Vercel-Id**: `icn1::pf728-1770185199921-4f4e689ee894`
- **X-Vercel-Cache**: `BYPASS`

**ë¶„ì„**:
- POST ìš”ì²­ë§Œ 405 ì—ëŸ¬ ë°œìƒ
- í•˜ì§€ë§Œ í—¤ë”ê°€ ì´ìƒí•¨ (X-Matched-Pathê°€ `/500`)

---

## ğŸ” íŒì • ê¸°ì¤€ ë¶„ì„

### íŒì • ê¸°ì¤€ 1: GET/OPTIONSë„ 405ì¸ê°€?
- **GET**: 500 ì—ëŸ¬ (405 ì•„ë‹˜)
- **OPTIONS**: 204 (405 ì•„ë‹˜)
- **POST**: 405 ì—ëŸ¬

**ê²°ë¡ **: âŒ GET/OPTIONSëŠ” 405ê°€ ì•„ë‹˜

---

### íŒì • ê¸°ì¤€ 2: GETì€ 404ì¸ë° POSTë§Œ 405ì¸ê°€?
- **GET**: 500 ì—ëŸ¬ (404 ì•„ë‹˜)
- **POST**: 405 ì—ëŸ¬

**ê²°ë¡ **: âš ï¸ GETì€ 500, POSTëŠ” 405 (ë¶€ë¶„ì ìœ¼ë¡œ ì¼ì¹˜)

---

### íŒì • ê¸°ì¤€ 3: Vercel í—¤ë”ì™€ Next.js ê¸°ë³¸ 405ì¸ê°€?
- **Vercel í—¤ë”**: âœ… ìˆìŒ (`X-Vercel-Id` ì¡´ì¬)
- **Next.js ê¸°ë³¸ 405**: âŒ ì•„ë‹˜ (X-Matched-Pathê°€ `/500`ìœ¼ë¡œ ì´ìƒí•¨)
- **Body**: HTML ì—ëŸ¬ í˜ì´ì§€ (Next.js ê¸°ë³¸ 405 í˜•ì‹ ì•„ë‹˜)

**ê²°ë¡ **: âš ï¸ Vercel í—¤ë”ëŠ” ìˆì§€ë§Œ ë¼ìš°íŠ¸ ë§¤ì¹­ì´ ì´ìƒí•¨

---

## ğŸ¯ ì§„ë‹¨ ê²°ê³¼

### í•µì‹¬ ë°œê²¬ì‚¬í•­

1. **ë¼ìš°íŠ¸ ë§¤ì¹­ ì‹¤íŒ¨**
   - ëª¨ë“  ìš”ì²­ì—ì„œ `X-Matched-Path: /500` ë°œìƒ
   - ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ê°€ ì „í˜€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
   - Next.jsê°€ ë¼ìš°íŠ¸ë¥¼ ì°¾ì§€ ëª»í•˜ê³  ì—ëŸ¬ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

2. **ìƒíƒœ ì½”ë“œ ë¶ˆì¼ì¹˜**
   - GET: 500 (ë¼ìš°íŠ¸ë¥¼ ì°¾ì§€ ëª»í•¨)
   - OPTIONS: 204 (CORS preflightëŠ” í†µê³¼í•˜ì§€ë§Œ ë¼ìš°íŠ¸ ë§¤ì¹­ ì‹¤íŒ¨)
   - POST: 405 (ë¼ìš°íŠ¸ëŠ” ì°¾ì•˜ì§€ë§Œ ë©”ì„œë“œ ë¶ˆì¼ì¹˜)

3. **ë¹Œë“œ/ë°°í¬ ë¬¸ì œ ê°€ëŠ¥ì„±**
   - ë¼ìš°íŠ¸ íŒŒì¼ì´ ë¹Œë“œì— í¬í•¨ë˜ì§€ ì•Šì•˜ì„ ê°€ëŠ¥ì„±
   - ë™ì  ë¼ìš°íŠ¸(`[id]`)ê°€ ì œëŒ€ë¡œ ë¹Œë“œë˜ì§€ ì•Šì•˜ì„ ê°€ëŠ¥ì„±
   - Vercel ë°°í¬ ì‹œ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ê°€ ëˆ„ë½ë˜ì—ˆì„ ê°€ëŠ¥ì„±

---

## ğŸ› ï¸ í•´ê²° ë°©ì•ˆ

### 1. ë¹Œë“œ í™•ì¸ (ìµœìš°ì„ )
```bash
# ë¡œì»¬ì—ì„œ í”„ë¡œë•ì…˜ ë¹Œë“œ í…ŒìŠ¤íŠ¸
npm run build
npm run start

# ë¹Œë“œëœ ë¼ìš°íŠ¸ í™•ì¸
ls -la .next/server/app/api/client/emails/
```

### 2. Vercel ë°°í¬ ë¡œê·¸ í™•ì¸
- Vercel ëŒ€ì‹œë³´ë“œ â†’ Deployments â†’ ìµœì‹  ë°°í¬
- Build Logsì—ì„œ ë¼ìš°íŠ¸ ë¹Œë“œ í™•ì¸
- Function Logsì—ì„œ ì—ëŸ¬ í™•ì¸

### 3. ë¼ìš°íŠ¸ íŒŒì¼ ì¬ìƒì„±
```bash
# ê¸°ì¡´ íŒŒì¼ ì‚­ì œ
rm -rf app/api/client/emails/[id]/test-send

# ìƒˆë¡œ ìƒì„±
mkdir -p app/api/client/emails/[id]/test-send
# route.ts íŒŒì¼ ì¬ì‘ì„±
```

### 4. ëª…ì‹œì  ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€
```typescript
// route.ts
export async function GET() {
  return NextResponse.json({ error: 'Method not allowed' }, { status: 405 })
}

export async function POST(...) {
  // ê¸°ì¡´ êµ¬í˜„
}
```

---

## ğŸ“‹ ë‹¤ìŒ ë‹¨ê³„

1. âœ… **Vercel ë°°í¬ ë¡œê·¸ í™•ì¸** (ë¹Œë“œ ì—ëŸ¬ í™•ì¸)
2. âœ… **ë¡œì»¬ í”„ë¡œë•ì…˜ ë¹Œë“œ í…ŒìŠ¤íŠ¸** (`npm run build && npm run start`)
3. âœ… **ë¹Œë“œëœ ë¼ìš°íŠ¸ íŒŒì¼ í™•ì¸** (`.next/server/app/api/client/emails/`)
4. âœ… **ë¼ìš°íŠ¸ íŒŒì¼ ì¬ìƒì„±** (ìœ„ ë°©ë²• ì‹¤íŒ¨ ì‹œ)

---

**ì‘ì„±ì¼**: 2026ë…„ 2ì›” 4ì¼  
**ì‘ì„±ì**: AI Assistant
