# ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸ & ì›í”„ë ˆë”•íŠ¸ ì‚¬ìš©ë²• ëª…ì„¸ì„œ

**ì‘ì„±ì¼**: 2026-01-28  
**ëª©ì **: ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸(Wert Intelligence)ì™€ ì›í”„ë ˆë”•íŠ¸(OnePredict)ì˜ ì„¤ê³„ ë° ì‚¬ìš©ë²• ì •ë¦¬

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸ (Wert Intelligence)](#ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸-wert-intelligence)
3. [ì›í”„ë ˆë”•íŠ¸ (OnePredict)](#ì›í”„ë ˆë”•íŠ¸-onepredict)
4. [ë¹„êµ ë¶„ì„](#ë¹„êµ-ë¶„ì„)
5. [ê³µí†µ API](#ê³µí†µ-api)
6. [ë°ì´í„° ì €ì¥ êµ¬ì¡°](#ë°ì´í„°-ì €ì¥-êµ¬ì¡°)
7. [ë¬¸ì œì  ë° ê°œì„  ë°©ì•ˆ](#ë¬¸ì œì -ë°-ê°œì„ -ë°©ì•ˆ)

---

## ê°œìš”

í˜„ì¬ EventFlow ì‹œìŠ¤í…œì—ëŠ” ë‘ ê°€ì§€ ë“±ë¡ ì‹œìŠ¤í…œì´ ë³‘í–‰ ìš´ì˜ë˜ê³  ìˆìŠµë‹ˆë‹¤:

1. **ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸ (Wert Intelligence)**: ìº í˜ì¸ ê¸°ë°˜ ë“±ë¡ ì‹œìŠ¤í…œ
2. **ì›í”„ë ˆë”•íŠ¸ (OnePredict)**: ì›¨ë¹„ë‚˜ ê¸°ë°˜ ë“±ë¡ ì‹œìŠ¤í…œ

ë‘ ì‹œìŠ¤í…œì€ ì„œë¡œ ë‹¤ë¥¸ ë°ì´í„° êµ¬ì¡°ì™€ í”Œë¡œìš°ë¥¼ ê°€ì§€ê³  ìˆì–´ í˜¼ë€ì„ ì•¼ê¸°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸ (Wert Intelligence)

### 1. ì‹œìŠ¤í…œ ê°œìš”

**ëª©ì **: ìº í˜ì¸ ê¸°ë°˜ ì´ë²¤íŠ¸ ë“±ë¡ ì‹œìŠ¤í…œ  
**íƒ€ì…**: ìº í˜ì¸ ë“±ë¡ (`event_survey_campaigns`)

### 2. ì ‘ê·¼ ê²½ë¡œ

| ê²½ë¡œ | ì„¤ëª… | ë¦¬ë‹¤ì´ë ‰íŠ¸ |
|------|------|-----------|
| `/wert` | ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸ ì „ìš© í˜ì´ì§€ | - |
| `/event/149403` | ìº í˜ì¸ public_path | - |
| `/event/149403/register` | ë“±ë¡ í˜ì´ì§€ | - |

### 3. ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

**ìº í˜ì¸ ì •ë³´**:
- **í…Œì´ë¸”**: `event_survey_campaigns`
- **public_path**: `/149403`
- **type**: `registration`
- **status**: `published`

**ë“±ë¡ ë°ì´í„° ì €ì¥**:
- **í…Œì´ë¸”**: `event_survey_entries`
- **ì—°ê²°**: `campaign_id` â†’ `event_survey_campaigns.id`

### 4. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
app/wert/page.tsx
â”œâ”€ WertPage (í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸)
â”‚  â”œâ”€ ë“±ë¡ ëª¨ë‹¬
â”‚  â”œâ”€ í¼ í•„ë“œ
â”‚  â””â”€ API í˜¸ì¶œ: /api/public/event-survey/[campaignId]/register
```

### 5. ë“±ë¡ í¼ í•„ë“œ

| í•„ë“œëª… | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|--------|------|------|------|
| `name` | string | âœ… | ì´ë¦„ (firstName + lastName) |
| `company` | string | âœ… | íšŒì‚¬ëª… |
| `phone` | string | âœ… | ì „í™”ë²ˆí˜¸ (010-1234-5678 í˜•ì‹) |
| `phone_norm` | string | âœ… | ì •ê·œí™”ëœ ì „í™”ë²ˆí˜¸ (ìˆ«ìë§Œ) |
| `email` | string | âš ï¸ | ì´ë©”ì¼ (registration_dataì— ì €ì¥) |
| `firstName` | string | âŒ | ì´ë¦„ (ì„±) |
| `lastName` | string | âŒ | ì´ë¦„ (ì´ë¦„) |
| `jobTitle` | string | âŒ | ì§ì±… |
| `consentEmail` | boolean | âŒ | ì´ë©”ì¼ ìˆ˜ì‹  ë™ì˜ |
| `consentPhone` | boolean | âŒ | ì „í™”ë²ˆí˜¸ ìˆ˜ì‹  ë™ì˜ |

### 6. API í˜¸ì¶œ

**ì—”ë“œí¬ì¸íŠ¸**: `POST /api/public/event-survey/[campaignId]/register`

**ìš”ì²­ ë³¸ë¬¸**:
```json
{
  "name": "í™ê¸¸ë™",
  "company": "íšŒì‚¬ëª…",
  "phone": "010-1234-5678",
  "phone_norm": "01012345678",
  "registration_data": {
    "email": "user@example.com",
    "firstName": "í™",
    "lastName": "ê¸¸ë™",
    "jobTitle": "ê³¼ì¥",
    "company": "íšŒì‚¬ëª…",
    "phone": "010-1234-5678",
    "consentEmail": true,
    "consentPhone": false
  }
}
```

**ì‘ë‹µ**:
```json
{
  "success": true,
  "survey_no": 1,
  "code6": "000001"
}
```

### 7. ë°ì´í„° ì €ì¥ íë¦„

```
1. ì‚¬ìš©ìê°€ /wert í˜ì´ì§€ ì ‘ì†
2. ë“±ë¡ ëª¨ë‹¬ì—ì„œ ì •ë³´ ì…ë ¥
3. POST /api/public/event-survey/[campaignId]/register í˜¸ì¶œ
4. campaignIdë¡œ event_survey_campaigns ì¡°íšŒ
5. event_survey_entries í…Œì´ë¸”ì— ì €ì¥
   - campaign_id: ìº í˜ì¸ ID
   - name, company, phone_norm: ê¸°ë³¸ ì •ë³´
   - registration_data: ìƒì„¸ ì •ë³´ (JSONB)
   - survey_no, code6: ìˆœë²ˆ ê´€ë¦¬
   - marketing_campaign_link_id: ë§ˆì¼€íŒ… ë§í¬ ì¶”ì  (ì„ íƒ)
```

### 8. íŠ¹ì§•

- âœ… ìº í˜ì¸ ê¸°ë°˜ êµ¬ì¡°
- âœ… `event_survey_entries` í…Œì´ë¸” ì‚¬ìš©
- âœ… UTM ì¶”ì  ì§€ì›
- âœ… ë§ˆì¼€íŒ… ë§í¬ ì¶”ì  ì§€ì›
- âœ… ìˆœë²ˆ ê´€ë¦¬ (`survey_no`, `code6`)

---

## ì›í”„ë ˆë”•íŠ¸ (OnePredict)

### 1. ì‹œìŠ¤í…œ ê°œìš”

**ëª©ì **: ì›¨ë¹„ë‚˜ ê¸°ë°˜ ë“±ë¡ ì‹œìŠ¤í…œ  
**íƒ€ì…**: ì›¨ë¹„ë‚˜ ë“±ë¡ (`webinars`)

### 2. ì ‘ê·¼ ê²½ë¡œ

| ê²½ë¡œ | ì„¤ëª… | ë¦¬ë‹¤ì´ë ‰íŠ¸ |
|------|------|-----------|
| `/webinar/426307/register` | ì›¨ë¹„ë‚˜ ë“±ë¡ í˜ì´ì§€ | - |
| `/webinar/426307` | ì›¨ë¹„ë‚˜ ë©”ì¸ í˜ì´ì§€ | â†’ `/webinar/426307/register` |
| `/event/426307` | ì´ë²¤íŠ¸ ê²½ë¡œ | â†’ `/event/426307/register` |
| `/event/426307/register` | ë“±ë¡ í˜ì´ì§€ | - |

### 3. ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

**ì›¨ë¹„ë‚˜ ì •ë³´**:
- **í…Œì´ë¸”**: `webinars`
- **slug**: `426307`
- **id**: `7cde90e7-a6db-4c42-8d72-572102f9fc5c`
- **access_policy**: `name_email_auth`

**ë“±ë¡ ë°ì´í„° ì €ì¥**:
- **í…Œì´ë¸”**: `registrations`
- **ì—°ê²°**: `webinar_id` â†’ `webinars.id`
- **ì‚¬ìš©ì**: `user_id` â†’ `profiles.id`

### 4. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
app/(webinar)/webinar/[id]/register/page.tsx
â”œâ”€ WebinarRegisterPage (ì„œë²„ ì»´í¬ë„ŒíŠ¸)
â”‚  â””â”€ slug === '426307' ì²´í¬
â”‚     â””â”€ OnePredictRegistrationPage (í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸)
â”‚        â”œâ”€ ë“±ë¡ í¼
â”‚        â”œâ”€ Visit ì¶”ì 
â”‚        â””â”€ API í˜¸ì¶œ: /api/public/event-survey/[campaignId]/register
â”‚           (campaignId = ì›¨ë¹„ë‚˜ ID)
```

### 5. ë“±ë¡ í¼ í•„ë“œ

| í•„ë“œëª… | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|--------|------|------|------|
| `email` | string | âœ… | ì´ë©”ì¼ (í•„ìˆ˜) |
| `name` | string | âœ… | ì´ë¦„ |
| `phone` | string | âš ï¸ | ì „í™”ë²ˆí˜¸ (ì„ íƒ) |
| `phone_norm` | string | âš ï¸ | ì •ê·œí™”ëœ ì „í™”ë²ˆí˜¸ |
| `company` | string | âŒ | íšŒì‚¬ëª… |
| `position` | string | âŒ | ì§ì±… |
| `jobTitle` | string | âŒ | ì§ì±… (positionê³¼ ë™ì¼) |
| `industry` | string | âŒ | ì‚°ì—… |
| `address` | string | âŒ | ì£¼ì†Œ |
| `country` | string | âŒ | êµ­ê°€ (ê¸°ë³¸ê°’: ëŒ€í•œë¯¼êµ­) |
| `interestedProducts` | string[] | âŒ | ê´€ì‹¬ ì œí’ˆ ëª©ë¡ |
| `message` | string | âŒ | ë©”ì‹œì§€ |
| `privacyConsent` | boolean | âœ… | ê°œì¸ì •ë³´ ë™ì˜ |

**ëª¨ë“  í•„ë“œëŠ” `registration_data` JSONBì— ì €ì¥ë©ë‹ˆë‹¤.**

### 6. API í˜¸ì¶œ

**ì—”ë“œí¬ì¸íŠ¸**: `POST /api/public/event-survey/[campaignId]/register`

**íŠ¹ì´ì‚¬í•­**: `campaignId`ì— **ì›¨ë¹„ë‚˜ ID**ë¥¼ ì§ì ‘ ì‚¬ìš©í•©ë‹ˆë‹¤.

**ìš”ì²­ ë³¸ë¬¸**:
```json
{
  "name": "í™ê¸¸ë™",
  "company": "íšŒì‚¬ëª…",
  "phone": "010-1234-5678",
  "phone_norm": "01012345678",
  "registration_data": {
    "email": "user@example.com",
    "name": "í™ê¸¸ë™",
    "company": "íšŒì‚¬ëª…",
    "position": "ê³¼ì¥",
    "jobTitle": "ê³¼ì¥",
    "industry": "ì œì¡°ì—…",
    "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬",
    "country": "ëŒ€í•œë¯¼êµ­",
    "interestedProducts": ["GuardiOne"],
    "message": "ë¬¸ì˜ì‚¬í•­",
    "phoneCountryCode": "+82",
    "privacyConsent": true,
    "consentEmail": false,
    "consentPhone": false
  },
  "utm_source": "google",
  "utm_medium": "cpc",
  "cid": "abc123",
  "session_id": "session_xyz"
}
```

**ì‘ë‹µ**:
```json
{
  "success": true,
  "message": "ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."
}
```

### 7. ë°ì´í„° ì €ì¥ íë¦„

```
1. ì‚¬ìš©ìê°€ /webinar/426307/register ì ‘ì†
2. OnePredictRegistrationPage ë Œë”ë§
3. Visit ì¶”ì  (Phase 3)
   - POST /api/public/campaigns/[campaignId]/visit
   - campaignId = ì›¨ë¹„ë‚˜ ID
4. ë“±ë¡ í¼ ì œì¶œ
5. POST /api/public/event-survey/[campaignId]/register í˜¸ì¶œ
   - campaignId = ì›¨ë¹„ë‚˜ ID (7cde90e7-a6db-4c42-8d72-572102f9fc5c)
6. APIì—ì„œ ì›¨ë¹„ë‚˜ ID í™•ì¸
   - event_survey_campaigns ì¡°íšŒ ì‹¤íŒ¨
   - webinars í…Œì´ë¸”ì—ì„œ ì¡°íšŒ ì„±ê³µ
   - isWebinarId = true ì„¤ì •
7. ì´ë©”ì¼ë¡œ ì‚¬ìš©ì í™•ì¸/ìƒì„±
   - profiles í…Œì´ë¸” ì¡°íšŒ
   - ì—†ìœ¼ë©´ auth.usersì— ìƒì„± í›„ profilesì— ìƒì„±
8. registrations í…Œì´ë¸”ì— ì €ì¥
   - webinar_id: ì›¨ë¹„ë‚˜ ID
   - user_id: ì‚¬ìš©ì ID
   - registration_data: ëª¨ë“  í¼ ë°ì´í„° (JSONB)
   - survey_no, code6: ìˆœë²ˆ ê´€ë¦¬
   - marketing_campaign_link_id: ë§ˆì¼€íŒ… ë§í¬ ì¶”ì  (ì„ íƒ)
9. event_survey_entriesì—ëŠ” ì €ì¥í•˜ì§€ ì•ŠìŒ
```

### 8. íŠ¹ì§•

- âœ… ì›¨ë¹„ë‚˜ ê¸°ë°˜ êµ¬ì¡°
- âœ… `registrations` í…Œì´ë¸” ì‚¬ìš©
- âœ… ì‚¬ìš©ì ì¸ì¦ í•„ìš” (`user_id` í•„ìˆ˜)
- âœ… ì´ë©”ì¼ ê¸°ë°˜ ì‚¬ìš©ì ìƒì„±
- âœ… UTM ì¶”ì  ì§€ì›
- âœ… Visit ì¶”ì  ì§€ì› (Phase 3)
- âœ… ë§ˆì¼€íŒ… ë§í¬ ì¶”ì  ì§€ì›
- âœ… ìˆœë²ˆ ê´€ë¦¬ (`survey_no`, `code6`)
- âŒ `event_survey_entries`ì—ëŠ” ì €ì¥í•˜ì§€ ì•ŠìŒ

---

## ë¹„êµ ë¶„ì„

### 1. ì•„í‚¤í…ì²˜ ë¹„êµ

| í•­ëª© | ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸ | ì›í”„ë ˆë”•íŠ¸ |
|------|---------------|-----------|
| **ê¸°ë°˜ êµ¬ì¡°** | ìº í˜ì¸ (`event_survey_campaigns`) | ì›¨ë¹„ë‚˜ (`webinars`) |
| **ì ‘ê·¼ ê²½ë¡œ** | `/wert`, `/event/149403` | `/webinar/426307/register` |
| **ì»´í¬ë„ŒíŠ¸** | `WertPage` | `OnePredictRegistrationPage` |
| **API ì—”ë“œí¬ì¸íŠ¸** | ë™ì¼ (`/api/public/event-survey/[campaignId]/register`) | ë™ì¼ (í•˜ì§€ë§Œ campaignId = ì›¨ë¹„ë‚˜ ID) |
| **ë°ì´í„° ì €ì¥** | `event_survey_entries` | `registrations` |
| **ì‚¬ìš©ì ì¸ì¦** | ë¶ˆí•„ìš” (ì „í™”ë²ˆí˜¸ ê¸°ë°˜) | í•„ìš” (ì´ë©”ì¼ ê¸°ë°˜) |

### 2. ë°ì´í„° ì €ì¥ ë¹„êµ

| í•­ëª© | ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸ | ì›í”„ë ˆë”•íŠ¸ |
|------|---------------|-----------|
| **í…Œì´ë¸”** | `event_survey_entries` | `registrations` |
| **ì—°ê²° í‚¤** | `campaign_id` | `webinar_id` + `user_id` |
| **ì‹ë³„ì** | `phone_norm` (ì „í™”ë²ˆí˜¸) | `user_id` (ì´ë©”ì¼) |
| **ìˆœë²ˆ ê´€ë¦¬** | âœ… `survey_no`, `code6` | âœ… `survey_no`, `code6` |
| **UTM ì¶”ì ** | âœ… ì§€ì› | âœ… ì§€ì› |
| **Visit ì¶”ì ** | âŒ ë¯¸ì§€ì› | âœ… ì§€ì› (Phase 3) |
| **ë§ˆì¼€íŒ… ë§í¬** | âœ… ì§€ì› | âœ… ì§€ì› |

### 3. í¼ í•„ë“œ ë¹„êµ

| í•„ë“œ | ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸ | ì›í”„ë ˆë”•íŠ¸ |
|------|---------------|-----------|
| **ì´ë¦„** | âœ… í•„ìˆ˜ | âœ… í•„ìˆ˜ |
| **ì´ë©”ì¼** | âš ï¸ ì„ íƒ (registration_data) | âœ… í•„ìˆ˜ |
| **ì „í™”ë²ˆí˜¸** | âœ… í•„ìˆ˜ | âš ï¸ ì„ íƒ |
| **íšŒì‚¬** | âœ… í•„ìˆ˜ | âŒ ì„ íƒ |
| **ì§ì±…** | âŒ ì„ íƒ | âŒ ì„ íƒ |
| **ì‚°ì—…** | âŒ ì—†ìŒ | âŒ ì„ íƒ |
| **ì£¼ì†Œ** | âŒ ì—†ìŒ | âŒ ì„ íƒ |
| **ê´€ì‹¬ì œí’ˆ** | âŒ ì—†ìŒ | âŒ ì„ íƒ |
| **ë©”ì‹œì§€** | âŒ ì—†ìŒ | âŒ ì„ íƒ |

### 4. API ì²˜ë¦¬ ë¡œì§ ë¹„êµ

#### ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸

```typescript
// 1. campaignIdë¡œ event_survey_campaigns ì¡°íšŒ
const campaign = await admin
  .from('event_survey_campaigns')
  .select('*')
  .eq('id', campaignId)
  .single()

// 2. event_survey_entriesì— ì €ì¥
await admin
  .from('event_survey_entries')
  .insert({
    campaign_id: campaignId,
    name,
    company,
    phone_norm,
    registration_data,
    survey_no,
    code6,
    marketing_campaign_link_id
  })
```

#### ì›í”„ë ˆë”•íŠ¸

```typescript
// 1. campaignIdë¡œ event_survey_campaigns ì¡°íšŒ ì‹œë„
const campaign = await admin
  .from('event_survey_campaigns')
  .select('*')
  .eq('id', campaignId)
  .maybeSingle()

// 2. ìº í˜ì¸ì´ ì—†ìœ¼ë©´ ì›¨ë¹„ë‚˜ IDì¸ì§€ í™•ì¸
if (!campaign) {
  const webinar = await admin
    .from('webinars')
    .select('*')
    .eq('id', campaignId)
    .maybeSingle()
  
  if (webinar) {
    isWebinarId = true
  }
}

// 3. ì›¨ë¹„ë‚˜ IDì¸ ê²½ìš°: registrationsì— ì €ì¥
if (isWebinarId) {
  // ì´ë©”ì¼ë¡œ ì‚¬ìš©ì í™•ì¸/ìƒì„±
  let profile = await admin
    .from('profiles')
    .select('id')
    .eq('email', email)
    .maybeSingle()
  
  if (!profile) {
    // auth.usersì— ì‚¬ìš©ì ìƒì„±
    const newUser = await admin.auth.admin.createUser({
      email,
      password: tempPassword,
      email_confirm: true
    })
    
    // profilesì— í”„ë¡œí•„ ìƒì„±
    profile = await admin
      .from('profiles')
      .insert({ id: newUser.user.id, email })
      .select()
      .single()
  }
  
  // registrationsì— ì €ì¥
  await admin
    .from('registrations')
    .insert({
      webinar_id: campaignId,
      user_id: profile.id,
      registration_data,
      survey_no,
      code6,
      marketing_campaign_link_id
    })
}
```

---

## ê³µí†µ API

### POST /api/public/event-survey/[campaignId]/register

**ì—­í• **: ë‘ ì‹œìŠ¤í…œ ëª¨ë‘ ì‚¬ìš©í•˜ëŠ” ë“±ë¡ API

**ì²˜ë¦¬ ë¡œì§**:

1. **ìº í˜ì¸ ì¡°íšŒ**
   ```typescript
   // 1. event_survey_campaigns ì¡°íšŒ ì‹œë„
   const campaign = await admin
     .from('event_survey_campaigns')
     .select('*')
     .eq('id', campaignId)
     .maybeSingle()
   
   // 2. ìº í˜ì¸ì´ ì—†ìœ¼ë©´ ì›¨ë¹„ë‚˜ IDì¸ì§€ í™•ì¸
   if (!campaign) {
     const webinar = await admin
       .from('webinars')
       .select('*')
       .eq('id', campaignId)
       .maybeSingle()
     
     if (webinar) {
       isWebinarId = true
       campaign = webinar // ì›¨ë¹„ë‚˜ë¥¼ campaignì²˜ëŸ¼ ì‚¬ìš©
     }
   }
   ```

2. **ë¶„ê¸° ì²˜ë¦¬**
   - **ìº í˜ì¸ì¸ ê²½ìš°**: `event_survey_entries`ì— ì €ì¥
   - **ì›¨ë¹„ë‚˜ì¸ ê²½ìš°**: `registrations`ì— ì €ì¥

3. **ê³µí†µ ì²˜ë¦¬**
   - UTM íŒŒë¼ë¯¸í„° ì •ê·œí™”
   - ë§ˆì¼€íŒ… ë§í¬ ì¶”ì  (`cid` â†’ `marketing_campaign_link_id`)
   - ìˆœë²ˆ ê´€ë¦¬ (`survey_no`, `code6`)

---

## ë°ì´í„° ì €ì¥ êµ¬ì¡°

### ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸

```sql
-- event_survey_entries í…Œì´ë¸”
INSERT INTO event_survey_entries (
  campaign_id,           -- event_survey_campaigns.id
  name,
  company,
  phone_norm,            -- í•„ìˆ˜: ì „í™”ë²ˆí˜¸ ê¸°ë°˜ ì¤‘ë³µ ë°©ì§€
  survey_no,
  code6,
  registration_data,     -- JSONB: ìƒì„¸ ì •ë³´
  marketing_campaign_link_id,
  utm_source,
  utm_medium,
  utm_campaign,
  ...
) VALUES (...)
```

### ì›í”„ë ˆë”•íŠ¸

```sql
-- registrations í…Œì´ë¸”
INSERT INTO registrations (
  webinar_id,            -- webinars.id
  user_id,               -- profiles.id (í•„ìˆ˜)
  nickname,
  role,                  -- ê¸°ë³¸ê°’: 'attendee'
  survey_no,
  code6,
  registration_data,     -- JSONB: ëª¨ë“  í¼ ë°ì´í„°
  marketing_campaign_link_id,
  registered_via         -- ê¸°ë³¸ê°’: 'manual'
) VALUES (...)
```

---

## ë¬¸ì œì  ë° ê°œì„  ë°©ì•ˆ

### 1. í˜„ì¬ ë¬¸ì œì 

#### 1.1 ë°ì´í„° ì €ì¥ ë¶ˆì¼ì¹˜

- **ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸**: `event_survey_entries` í…Œì´ë¸” ì‚¬ìš©
- **ì›í”„ë ˆë”•íŠ¸**: `registrations` í…Œì´ë¸” ì‚¬ìš©
- **ì˜í–¥**: ë§ˆì¼€íŒ… ì „í™˜ ì¶”ì  ì‹œ ë‘ í…Œì´ë¸”ì„ ë¶„ê¸° ì²˜ë¦¬í•´ì•¼ í•¨

#### 1.2 API ì—”ë“œí¬ì¸íŠ¸ í˜¼ìš©

- ë™ì¼í•œ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ `campaignId`ì˜ ì˜ë¯¸ê°€ ë‹¤ë¦„
- ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸: ì‹¤ì œ ìº í˜ì¸ ID
- ì›í”„ë ˆë”•íŠ¸: ì›¨ë¹„ë‚˜ ID (ìº í˜ì¸ IDê°€ ì•„ë‹˜)

#### 1.3 ì‚¬ìš©ì ì¸ì¦ ë°©ì‹ ì°¨ì´

- **ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸**: ì „í™”ë²ˆí˜¸ ê¸°ë°˜ (ì¸ì¦ ë¶ˆí•„ìš”)
- **ì›í”„ë ˆë”•íŠ¸**: ì´ë©”ì¼ ê¸°ë°˜ (ì¸ì¦ í•„ìš”, ìë™ ìƒì„±)

#### 1.4 ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬

- ì„œë¡œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© (`WertPage` vs `OnePredictRegistrationPage`)
- ì½”ë“œ ì¤‘ë³µ ê°€ëŠ¥ì„±

### 2. ê°œì„  ë°©ì•ˆ

#### 2.1 ë°ì´í„° í†µí•© (ê¶Œì¥)

**ëª©ì **: ëª¨ë“  ë“±ë¡ì„ `event_survey_entries`ë¡œ í†µí•©

**ë°©ì•ˆ**:
1. `event_survey_entries`ì— `webinar_id`, `user_id` ì»¬ëŸ¼ ì¶”ê°€
2. ì›í”„ë ˆë”•íŠ¸ ë“±ë¡ë„ `event_survey_entries`ì— ì €ì¥
3. `target_type`ìœ¼ë¡œ êµ¬ë¶„ ('campaign' / 'webinar')

**ì¥ì **:
- ë§ˆì¼€íŒ… ì „í™˜ ì¶”ì  ì¼ê´€ì„± í™•ë³´
- ì½”ë“œ ë‹¨ìˆœí™”
- ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

**ë‹¨ì **:
- ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš”
- ê¸°ì¡´ `registrations` ë°ì´í„° ì²˜ë¦¬ í•„ìš”

#### 2.2 API ì—”ë“œí¬ì¸íŠ¸ ë¶„ë¦¬

**ë°©ì•ˆ**:
- ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸: `/api/public/event-survey/[campaignId]/register`
- ì›í”„ë ˆë”•íŠ¸: `/api/public/webinars/[webinarId]/register`

**ì¥ì **:
- API ì˜ë¯¸ ëª…í™•í™”
- ì½”ë“œ ê°€ë…ì„± í–¥ìƒ

**ë‹¨ì **:
- API ì—”ë“œí¬ì¸íŠ¸ ì¦ê°€
- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ ìˆ˜ì • í•„ìš”

#### 2.3 ì»´í¬ë„ŒíŠ¸ í†µí•©

**ë°©ì•ˆ**:
- ê³µí†µ ë“±ë¡ ì»´í¬ë„ŒíŠ¸ ìƒì„±
- íƒ€ì…ì— ë”°ë¼ í•„ë“œ í‘œì‹œ/ìˆ¨ê¹€

**ì¥ì **:
- ì½”ë“œ ì¤‘ë³µ ì œê±°
- ì¼ê´€ëœ UX

**ë‹¨ì **:
- ì»´í¬ë„ŒíŠ¸ ë³µì¡ë„ ì¦ê°€

---

## ê²°ë¡ 

í˜„ì¬ ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸ì™€ ì›í”„ë ˆë”•íŠ¸ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì„¤ê³„ ì² í•™ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤:

- **ì›ŒíŠ¸ì¸í…”ë¦¬ì „íŠ¸**: ìº í˜ì¸ ì¤‘ì‹¬, ì „í™”ë²ˆí˜¸ ê¸°ë°˜, ê°„ë‹¨í•œ ë“±ë¡
- **ì›í”„ë ˆë”•íŠ¸**: ì›¨ë¹„ë‚˜ ì¤‘ì‹¬, ì´ë©”ì¼ ê¸°ë°˜, ìƒì„¸í•œ ë“±ë¡

**ê¶Œì¥ ì‚¬í•­**:
1. **ë‹¨ê¸°**: í˜„ì¬ êµ¬ì¡° ìœ ì§€í•˜ë˜, ë¬¸ì„œí™” ê°•í™”
2. **ì¤‘ê¸°**: ë°ì´í„° í†µí•© ê²€í†  (`event_survey_entries`ë¡œ í†µí•©)
3. **ì¥ê¸°**: í†µí•© ë“±ë¡ ì‹œìŠ¤í…œ êµ¬ì¶•

**ë‹¤ìŒ ë‹¨ê³„**:
- ë°ì´í„° í†µí•© ë§ˆì´ê·¸ë ˆì´ì…˜ ê³„íš ìˆ˜ë¦½
- API ì—”ë“œí¬ì¸íŠ¸ ì •ë¦¬
- ì»´í¬ë„ŒíŠ¸ í†µí•© ê²€í† 

---

**ì‘ì„±ì**: AI Assistant  
**ê²€í†  í•„ìš”**: ë°ì´í„° í†µí•© ë°©ì•ˆ ìµœì¢… ê²°ì •
